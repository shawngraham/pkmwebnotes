:root{--primary: #2563eb;--background: #ffffff;--surface: #f8fafc;--text: #1e293b;--text-muted: #64748b;--border: #e2e8f0;--success: #059669;--warning: #d97706;--error: #ef4444;--primary-hover: #1d4ed8;--bg-primary: var(--background);--bg-secondary: var(--surface);--bg-hover: #f1f5f9;--text-primary: var(--text);--border-light: var(--border);--bg-preview: #f8fafc}[data-theme=dark]{--primary: #3b82f6;--background: #0f172a;--surface: #1e293b;--text: #f1f5f9;--text-muted: #94a3b8;--border: #334155;--error: #f87171;--primary-hover: #60a5fa;--bg-primary: var(--surface);--bg-secondary: var(--background);--bg-hover: #334155;--text-primary: var(--text);--border-light: #2c3a4f;--bg-preview: #172133}*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;background:var(--background);color:var(--text);font-size:14px;line-height:1.6;height:100vh;overflow:hidden;padding:20px}.app{height:calc(100vh - 40px);display:grid;grid-template-rows:auto 1fr;background:var(--background);border-radius:16px;box-shadow:0 10px 30px #0000001a;overflow:hidden;border:1px solid var(--border)}.header{background:var(--surface);border-bottom:1px solid var(--border);padding:12px 16px;display:flex;align-items:center;gap:16px;flex-shrink:0}.logo{font-weight:600;color:var(--primary);font-size:16px}.search-input{flex:1;max-width:300px;padding:8px 12px;border:1px solid var(--border);border-radius:6px;background:var(--background);color:var(--text)}.search-input:focus{outline:none;border-color:var(--primary)}.header-actions{margin-left:auto;display:flex;align-items:center;gap:8px}.btn{padding:8px 12px;border:1px solid var(--border);border-radius:6px;background:var(--surface);color:var(--text);cursor:pointer;font-size:14px;transition:all .2s}.btn:hover{background:var(--bg-hover);border-color:var(--text-muted)}.main{display:grid;grid-template-columns:280px minmax(0,1fr) 280px;height:100%;overflow:hidden}.editor-area{position:relative;overflow:hidden}.sidebar{background:var(--surface);border-right:1px solid var(--border);display:flex;flex-direction:column;height:100%;overflow:hidden}.sidebar-header{padding:16px;border-bottom:1px solid var(--border);font-weight:600}.note-list{flex:1;overflow-y:auto;padding:8px}.note-item{padding:12px;border-radius:6px;cursor:pointer;margin-bottom:4px;transition:background .2s}.note-item:hover{background:var(--bg-hover)}.note-item.active{background:var(--primary);color:#fff}.note-title{font-weight:500;margin-bottom:4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.note-preview{font-size:12px;color:var(--text-muted);overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.note-item.active .note-preview{color:#fffc}.editor-panes-container{position:absolute;inset:0;display:flex;height:100%}.editor-container{width:100%;height:100%;display:flex;flex-direction:column;overflow:hidden;background:var(--background)}.editor-tabs{display:flex;background-color:var(--surface);border-bottom:1px solid var(--border);padding:4px 8px 0;overflow-x:auto;flex-shrink:0}.editor-tabs::-webkit-scrollbar{height:4px}.editor-tabs::-webkit-scrollbar-thumb{background-color:var(--border);border-radius:2px}.editor-tab{display:flex;align-items:center;gap:8px;padding:8px 12px;border:1px solid transparent;border-bottom:none;border-radius:6px 6px 0 0;margin-right:4px;cursor:pointer;background-color:var(--bg-secondary);position:relative;top:1px;white-space:nowrap}.editor-tab:hover{background-color:var(--bg-hover)}.editor-tab.active{background-color:var(--background);border-color:var(--border);color:var(--primary);font-weight:500}.tab-close-btn{background:none;border:none;color:var(--text-muted);font-size:16px;cursor:pointer;border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center;line-height:1}.tab-close-btn:hover{background-color:var(--border);color:var(--text)}.editor-header{padding:8px 16px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;background:var(--surface);flex-shrink:0}.editor-title{font-weight:500;color:var(--text);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.editor-modes{display:flex;gap:4px;align-items:center}.mode-btn{padding:6px 12px;border:1px solid var(--border);border-radius:4px;background:var(--background);color:var(--text);cursor:pointer;font-size:12px}.mode-btn.active{background:var(--primary);color:#fff;border-color:var(--primary)}.editor-content{flex-grow:1;display:grid;overflow:hidden}.editor-content.edit-mode{grid-template-columns:1fr 0fr}.editor-content.split-mode{grid-template-columns:1fr 1fr}.editor-content.preview-mode{grid-template-columns:0fr 1fr}.editor-pane,.preview-pane{overflow-y:auto;height:100%}.editor-pane{background-color:var(--background)}.preview-pane{background-color:var(--bg-preview)}.editor-content.split-mode .preview-pane{border-left:1px solid var(--border)}.preview-content{padding:20px;max-width:800px;margin:0 auto}.preview-content>*:first-child{margin-top:0}.preview-content h1,.preview-content h2,.preview-content h3{margin-bottom:16px;color:var(--text)}.preview-content p{margin-bottom:16px}.preview-content pre{background:var(--surface);padding:16px;border-radius:6px;overflow-x:auto;margin-bottom:16px}.preview-content code{background:var(--surface);padding:2px 6px;border-radius:4px;font-size:13px}.preview-content pre code{background:none;padding:0}.preview-content table{width:100%;border-collapse:collapse;margin-bottom:16px;font-size:14px;border:1px solid var(--border)}.preview-content th,.preview-content td{border:1px solid var(--border);padding:10px 14px;text-align:left}.preview-content th{background-color:var(--surface);font-weight:600}.preview-content tr:nth-child(2n){background-color:var(--surface)}.preview-content tbody tr:nth-child(odd){background-color:var(--bg-hover)}.wikilink{color:var(--primary);text-decoration:none;border-bottom:1px dotted var(--primary);cursor:pointer}.wikilink:hover{background:#2563eb1a}.wikilink.broken{color:var(--warning);border-bottom-color:var(--warning)}.right-sidebar{background:var(--surface);border-left:1px solid var(--border);display:flex;flex-direction:column;height:100%;overflow-y:auto;transition:all .2s}.right-sidebar-content{padding:8px}.main.right-sidebar-collapsed{grid-template-columns:280px 1fr 0}.main.right-sidebar-collapsed .right-sidebar{width:0;min-width:0;padding:0;border-left:none;overflow:hidden}#toggle-right-sidebar{margin-left:8px;font-size:16px;padding:6px 10px}#toggle-right-sidebar i{transition:transform .3s ease-in-out}.main.right-sidebar-collapsed #toggle-right-sidebar i{transform:rotate(180deg)}.sidebar-section{margin-bottom:20px}.sidebar-section-header{padding:12px 8px;font-weight:600;color:var(--text);border-bottom:1px solid var(--border);margin-bottom:8px}.word-count-display,.empty-sidebar{padding:8px;color:var(--text-muted)}.backlink-item{padding:8px 12px;border-radius:4px;cursor:pointer;margin-bottom:4px;transition:background .2s}.backlink-item:hover{background:var(--bg-hover)}.backlink-title{font-weight:500;margin-bottom:4px}.backlink-context{font-size:12px;color:var(--text-muted);overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.graph-container{padding:8px;border:1px solid var(--border);border-radius:6px;background:var(--background);margin-bottom:8px}.graph-container svg{width:100%;height:auto}.graph-node{cursor:pointer}.graph-link{stroke:var(--border);stroke-opacity:.6}.status-bar{background:var(--surface);border-top:1px solid var(--border);padding:8px 16px;font-size:12px;color:var(--text-muted);display:flex;justify-content:flex-end;flex-shrink:0}.empty-state{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;width:100%;color:var(--text-muted)}.empty-state h3{margin-bottom:8px;font-size:18px}.hidden{display:none}::-webkit-scrollbar{width:12px;height:12px}::-webkit-scrollbar-track{background:var(--surface)}::-webkit-scrollbar-thumb{background-color:var(--border);border-radius:6px;border:3px solid var(--surface)}::-webkit-scrollbar-thumb:hover{background-color:var(--text-muted)}.context-menu{position:fixed;z-index:1000;width:200px;background-color:var(--surface);border-radius:8px;border:1px solid var(--border);box-shadow:0 5px 15px #0000001a;padding:6px;display:flex;flex-direction:column}.context-menu-item{font-size:14px;padding:8px 12px;cursor:pointer;border-radius:4px;display:flex;align-items:center;gap:8px;background:none;border:none;text-align:left;color:var(--text)}.context-menu-item:hover{background-color:var(--primary);color:#fff}.context-menu-separator{height:1px;background:var(--border);margin:4px 0}.embedded-block{display:block;background:var(--background);border:1px solid var(--border);border-radius:6px;padding:12px;margin-bottom:16px;box-shadow:0 1px 2px #0000000d}.embedded-block-source{font-size:11px;color:var(--text-muted);margin-top:10px;text-align:right}.broken-embed{border-left:3px solid var(--warning);padding:8px;background:var(--surface);color:var(--text-muted);font-style:italic}.welcome-modal{position:fixed;inset:0;z-index:10000;display:flex;align-items:center;justify-content:center}.welcome-overlay{position:absolute;inset:0;background:#00000080;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.welcome-modal-content{position:relative;background:var(--background);border-radius:12px;box-shadow:0 20px 60px #0000004d;max-width:800px;max-height:90vh;width:90%;border:1px solid var(--border);overflow:hidden}.welcome-header{background:var(--surface);padding:20px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}.welcome-header h2{margin:0;color:var(--text);font-size:24px}.welcome-close-btn{background:none;border:none;font-size:24px;color:var(--text-muted);cursor:pointer;padding:4px;border-radius:4px;line-height:1}.welcome-close-btn:hover{background:var(--border);color:var(--text)}.welcome-body{padding:20px;overflow-y:auto;max-height:calc(90vh - 140px);color:var(--text);line-height:1.6}.welcome-body h3{color:var(--primary);margin:0 0 16px;font-size:20px}.welcome-body h4{color:var(--text);margin:20px 0 8px;font-size:16px;font-weight:600}.welcome-body ul{margin:0 0 16px 20px;padding:0}.welcome-body li{margin-bottom:4px}.welcome-body code{background:var(--surface);padding:2px 6px;border-radius:4px;font-size:13px;color:var(--primary)}.welcome-footer{background:var(--surface);padding:16px 20px;border-top:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}.welcome-checkbox{display:flex;align-items:center;gap:8px;font-size:14px;color:var(--text-muted);cursor:pointer}.confirm-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0009;z-index:9998;display:flex;align-items:center;justify-content:center}.confirm-modal{background-color:var(--bg-primary);border:1px solid var(--border);border-radius:8px;box-shadow:0 4px 15px #0003;width:90%;max-width:400px;z-index:9999;overflow:hidden}.confirm-modal-header{padding:16px;font-size:1.1em;font-weight:600;border-bottom:1px solid var(--border-light)}.confirm-modal-body{padding:20px 16px;line-height:1.5}.confirm-modal-footer{padding:12px 16px;display:flex;justify-content:flex-end;gap:12px;background-color:var(--bg-secondary);border-top:1px solid var(--border-light)}.confirm-btn{padding:8px 16px;border:1px solid var(--border);border-radius:5px;cursor:pointer;font-weight:500;transition:background-color .2s,border-color .2s}.confirm-btn.primary{background-color:var(--primary);color:#fff;border-color:var(--primary)}.confirm-btn.primary:hover{background-color:var(--primary-hover)}.confirm-btn.danger{background-color:#d9534f;color:#fff;border-color:#d9534f}.confirm-btn.danger:hover{background-color:#c9302c}.confirm-btn.secondary{background-color:var(--bg-primary);color:var(--text-primary)}.confirm-btn.secondary:hover{background-color:var(--bg-hover)}.confirm-modal-skip{margin-top:16px;padding-top:12px;border-top:1px solid var(--border-light);font-size:.9em;color:var(--text-muted)}.confirm-modal-skip label{display:flex;align-items:center;gap:8px;cursor:pointer}.folder-item{margin:4px 0}.folder-header{padding:8px 12px;cursor:pointer;display:flex;align-items:center;gap:6px;background:var(--bg-secondary);border-radius:4px;transition:background .2s}.folder-header:hover{background:var(--bg-hover)}.folder-arrow{font-size:10px;width:12px}.folder-name{flex:1;font-weight:500}.folder-count{font-size:11px;color:var(--text-muted)}.folder-contents{margin-left:20px;margin-top:4px}.code-container{border:1px solid var(--border);border-radius:6px;margin-bottom:16px;background:var(--background);overflow:hidden;position:relative;box-shadow:0 1px 2px #0000000d}.code-header{display:flex;justify-content:space-between;align-items:center;padding:8px 12px;background:var(--background);border-bottom:1px solid var(--border)}.code-header span{font-weight:500;font-size:12px;color:var(--text-muted);text-transform:uppercase}.run-btn{padding:4px 10px;background:var(--primary);color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:12px;font-weight:500;transition:background-color .2s}.run-btn:hover{background-color:var(--primary-hover)}.run-btn:disabled{opacity:.5;cursor:not-allowed}.code-container pre{margin:0;border-radius:0}.code-output{padding:12px;font-family:SF Mono,Monaco,Inconsolata,monospace;font-size:13px;background:var(--background);border-top:1px dashed var(--border);min-height:1.5em;white-space:pre-wrap;word-break:break-word}.code-output.has-output{border-top:1px solid var(--border)}.code-output pre{margin:0;background:none;padding:0}.code-output .output-error{color:var(--error);background:#ef44441a;padding:8px;border-radius:4px}.code-output .spinner{color:var(--text-muted);font-style:italic}.code-output table{border-collapse:collapse;width:100%;margin-top:8px;font-size:12px}.code-output table th,.code-output table td{border:1px solid var(--border);padding:4px 8px;text-align:left}.code-output table th{background:var(--surface);font-weight:600}.code-output img{max-width:100%;height:auto;margin-top:8px;border-radius:4px;border:1px solid var(--border)}.output-actions{display:flex;justify-content:flex-end;gap:8px;margin-top:12px;padding-top:8px;border-top:1px solid var(--border)}.output-actions button{padding:4px 10px;background:var(--surface);color:var(--text-muted);border:1px solid var(--border);border-radius:4px;cursor:pointer;font-size:11px;font-weight:500;transition:all .2s ease}.output-actions button:hover{background-color:var(--bg-hover);border-color:var(--text-muted);color:var(--text)}.output-actions:first-child{margin-top:0;padding-top:0;border-top:none}.cm-wikilink{color:#4a90e2;text-decoration:none;background-color:#4a90e21a;border-bottom:1px dotted #4a90e2;padding:1px 2px;border-radius:3px}.cm-wikilink:hover{background-color:#4a90e233;text-decoration:underline}.cm-wikilink-broken{color:#d0021b;background-color:#d0021b1a;border-bottom:1px dotted #d0021b}.navigation-controls{display:flex;gap:4px;margin-left:16px}.nav-btn{padding:8px 10px}.nav-btn:disabled{opacity:.4;cursor:not-allowed}[data-theme=dark] .embedded-block,[data-theme=dark] .code-container{box-shadow:0 1px 2px #0003}:is([data-theme=dark] .embedded-block,[data-theme=dark] .code-container) .code-output{padding:0;font-family:SF Mono,Monaco,Inconsolata,monospace;font-size:13px;background:var(--background);border-top:1px dashed var(--border);min-height:1.5em;white-space:pre-wrap;word-break:break-word}:is([data-theme=dark] .embedded-block,[data-theme=dark] .code-container) .output-header{display:flex;justify-content:space-between;align-items:center;padding:6px 12px;background-color:var(--surface);border-bottom:1px solid var(--border)}:is([data-theme=dark] .embedded-block,[data-theme=dark] .code-container) .execution-info{font-size:11px;color:var(--text-muted)}:is([data-theme=dark] .embedded-block,[data-theme=dark] .code-container) .execution-number{font-weight:700;margin-right:4px}:is([data-theme=dark] .embedded-block,[data-theme=dark] .code-container) .copy-output-btn{padding:3px 8px;font-size:11px;background:var(--surface);border:1px solid var(--border);color:var(--text-muted);border-radius:4px;cursor:pointer;transition:all .2s ease}:is([data-theme=dark] .embedded-block,[data-theme=dark] .code-container) .copy-output-btn:hover{background-color:var(--bg-hover);border-color:var(--text-muted);color:var(--text)}:is([data-theme=dark] .embedded-block,[data-theme=dark] .code-container) .output-label{font-weight:500;font-size:11px;color:var(--text-muted);text-transform:uppercase;padding:8px 12px 0}:is([data-theme=dark] .embedded-block,[data-theme=dark] .code-container) .output-text,:is([data-theme=dark] .embedded-block,[data-theme=dark] .code-container) .output-result{padding:8px 12px;margin:0;background:none}:is([data-theme=dark] .embedded-block,[data-theme=dark] .code-container) .output-error{background:#ef44441a;color:var(--error);margin:8px 12px;border-radius:4px;padding:8px}:is([data-theme=dark] .embedded-block,[data-theme=dark] .code-container) .plot-container{padding:8px 12px;text-align:center}:is([data-theme=dark] .embedded-block,[data-theme=dark] .code-container) .plot-container img{max-width:100%;height:auto;border-radius:4px;border:1px solid var(--border);display:block;margin:0 auto 8px}:is([data-theme=dark] .embedded-block,[data-theme=dark] .code-container) .plot-actions{display:flex;justify-content:center;gap:8px;margin-top:8px}:is([data-theme=dark] .embedded-block,[data-theme=dark] .code-container) .plot-actions button{padding:4px 10px;background:var(--surface);color:var(--text-muted);border:1px solid var(--border);border-radius:4px;cursor:pointer;font-size:11px;font-weight:500;transition:all .2s ease;white-space:nowrap}:is([data-theme=dark] .embedded-block,[data-theme=dark] .code-container) .plot-actions button:hover{background-color:var(--bg-hover);border-color:var(--text-muted);color:var(--text)}
